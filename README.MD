## Версия Node.js

"node": "^12.13.0"
"npm": "^6.12"

## Запуск

Для запуска сервера необходимо добавить в папку /config файл с наименованием local.json, следующего содержания:

```

{
"jwt": // токен от шри api,
"port": 5000, // Обязательно 5000
"github-token": // не обязательно, но github без токена позволяет делать только 60 запросов в час
}

```

Стартуем сервер

```
npm run server
```

Приложение доступно по адресу
[http://localhost:5000/](http://localhost:5000/)

## Описание

При разработке приложения я использовал пакет Create-React-App, наверное поэтому оптимальным вариантом было бы использовать встроенный serviceWorker, но это бы лишило смысла выполнения этого ДЗ. Поэтому я использовал непосредственно ServiceWorker API.

Сперва я выбрал стратегию Cache and update, она сохранилось в предыдущем коммите.
Но обратив внимание на то, что все статические файлы имеют хэш в наименовании, то содержимое файла будет новым только при новом хэше, поэтому не имеет никакого смысла их обновлять.
И я решил выбрать стратегию Cache only. Но я добавил очистку кэша и skipWaiting() при установке нового воркера.

Но т.к. моя реализация является своеобразным костылем к Create-React-App, в ней есть не очень удобный момент. Я забираю информацию из precache-manifest - файл, который генерирует Create-React-App при сборке приложения. Это удобней, чем каждый раз вручную перечислять статические файлы, но т.к. я делаю importScripts("/precache-manifest{HASH}.js), то актуальное имя файла мы получаем только после сборки, и поэтому, нужно будет изменить хэш precache-manifest в воркере и повторять сборку. В этом случае содержимое воркера изменится и skipWaiting() запустит обновленный воркер.

Воркер расположен в [/client/public/sw.js](https://github.com/mgkOV/shri-ci-server/blob/workers/client/public/sw.js)

Регистрирую воркер в [/client/public/index.html](https://github.com/mgkOV/shri-ci-server/blob/workers/client/public/index.html)
