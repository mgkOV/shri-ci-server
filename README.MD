# Локализация

## Версия Node.js

"node": "^12.13.0"
"npm": "^6.12"

## запуск

Для запуска сервера необходимо добавить в папку /config файл с наименованием local.json, следующего содержания:

```

{
"jwt": // токен от шри api,
"port": 5000, // Обязательно 5000
"github-token": // не обязательно, но github без токена позволяет делать только 60 запросов в час
}

```

Запуск сервера:

```
npm run server
```

Приложение доступно по адресу [http://localhost:5000/](http://localhost:5000/)

## Описание

[Ссылка на gitlocalize](https://gitlocalize.com/repo/4686)

- По умолчанию загружается английская версия, при изменение языка, язык сохраняется в localstorage
- Практически все текстовые поля поддерживают переключение языка. Исключение составляет информация из репо гитхаба и плэйсхолдеры в полях формы на странице настроек. На клиент загружается только тексты для текущего языка. JSON файлы с переводами хранятся в папке [locale](https://github.com/mgkOV/shri-ci-server/tree/l10n/locale). Папка синхронизирована с [gitlocalize](https://gitlocalize.com/repo/4686)
- переводы на клиент попадают по ajax запросам, для этого пришлось добавить [text в redux store](https://github.com/mgkOV/shri-ci-server/tree/l10n/client/src/redux/text)
- в [redux store хранится информация о языке](https://github.com/mgkOV/shri-ci-server/tree/l10n/client/src/redux/lang). Это необходимо по большей части для передачи информации о языке на сервер, т.к. форматирования вывода даты/времени старта сборки и вывода длительности происходит на сервере. Для загрузки дат в новом формате с сервера происходит reload страницы при смене языка
